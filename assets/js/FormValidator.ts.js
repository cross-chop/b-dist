class i extends HTMLElement{form=null;submitButton=null;postMessageData=null;connectedCallback(){const e=this.getAttribute("submit-button-id"),s=this.getAttribute("post-message");if(!e){console.error("FormValidator: submit-button-id attribute is required");return}if(this.postMessageData=s,this.form=this.querySelector("form"),this.submitButton=document.querySelector(`#${e}`),!this.form||!this.submitButton){console.error("FormValidator: form or submit button not found");return}this.submitButton.addEventListener("click",t=>{t.preventDefault(),this.handleSubmit()})}handleSubmit(){if(!this.form)return;let e=!0;if(this.form.querySelectorAll("form-field, payment-options").forEach(t=>{t.validate&&typeof t.validate=="function"&&(t.validate()||(e=!1))}),e)if(this.postMessageData){const t=window.location.origin;try{const o=JSON.parse(this.postMessageData);window.postMessage(o,t)}catch{window.postMessage(this.postMessageData,t)}}else this.form.submit()}}customElements.define("form-validator",i);
