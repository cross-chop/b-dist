import{g as l}from"./index.js";import{S as u}from"./ScrollTrigger.js";import{M as p}from"./MorphSVGPlugin.js";l.registerPlugin(p,u);class d extends HTMLElement{shapeColor;buttonColor;colors;MAX;RADIUS;FPS;CENTER;SPEED_MIN;SPEED_MAX;RADIUS_CHANGE_MIN;RADIUS_CHANGE_MAX;canvas;ctx;point;canvasArea;shapes;shapeBase;logo;btn;constructor(){super(),this.shapeColor="#ffffff",this.buttonColor="#000000",this.colors=[{label:"blue",value:"#88C8F0"},{label:"red",value:"#E67162"},{label:"pink",value:"#FAB4BF"},{label:"green",value:"#54B37B"}],this.style.setProperty("--current-color",this.buttonColor),this.MAX=10,this.RADIUS=195,this.FPS=60,this.CENTER={x:390,y:390},this.SPEED_MIN=2*1.3,this.SPEED_MAX=6*1.3,this.RADIUS_CHANGE_MIN=.2,this.RADIUS_CHANGE_MAX=.8,this.canvas=null,this.ctx=null,this.point=[],this.canvasArea=null,this.shapes=null,this.shapeBase=null,this.logo=null,this.init()}async init(){this.canvasArea=this.querySelector("#canvasArea"),this.shapes=this.querySelector(".shapes"),this.shapeBase=this.querySelector(".shapeBase"),this.logo=this.querySelector(".logo"),this.canvas=this.querySelector("#canvas"),this.btn=this.querySelector(".btn"),this.canvas&&this.canvasArea&&this.shapes&&this.shapeBase&&this.logo&&(this.ctx=this.canvas.getContext("2d"),this.ctx&&(this.initializeCanvas(),this.startAnimation()))}createPoint(o,i,a){const e=this;return{x:0,y:0,centerX:o.x,centerY:o.y,radian:a*(Math.PI/180),radius:i,speed:Math.random()*(e.SPEED_MAX-e.SPEED_MIN)+e.SPEED_MIN,r:Math.random()*(e.RADIUS_CHANGE_MAX-this.RADIUS_CHANGE_MIN)+this.RADIUS_CHANGE_MIN,rota:0,update(){const h=Math.cos(this.rota*(Math.PI/180))*this.r;this.radius+=h;const c=Math.cos(this.radian)*this.radius,t=Math.sin(this.radian)*this.radius;this.x=c+this.centerX,this.y=t+this.centerY,this.rota+=this.speed,this.rota>360&&(this.rota-=360)}}}initializeCanvas(){const o=360/this.MAX;for(let i=0;i<this.MAX;i++)this.point[i]=this.createPoint(this.CENTER,this.RADIUS,o*i)}updateCanvas(){for(let o=0;o<this.MAX;o++)this.point[o].update();this.drawCanvas()}drawCanvas(){if(!this.ctx||!this.canvas)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.shapeColor,this.ctx.beginPath();const o=(this.point[0].x+this.point[this.MAX-1].x)/2,i=(this.point[0].y+this.point[this.MAX-1].y)/2;this.ctx.moveTo(o,i);for(let a=0;a<this.MAX-1;a++){const e=(this.point[a].x+this.point[a+1].x)/2,h=(this.point[a].y+this.point[a+1].y)/2;this.ctx.quadraticCurveTo(this.point[a].x,this.point[a].y,e,h)}this.ctx.quadraticCurveTo(this.point[this.MAX-1].x,this.point[this.MAX-1].y,o,i),this.ctx.closePath(),this.ctx.fill()}startAnimation(){const t=l.timeline({repeat:-1,onUpdate:()=>{this.updateCanvas()}});t.timeScale(1.7),this.colors.forEach(({label:s,value:n},r)=>{r===0&&(t.to({},{duration:3}),t.to(this.logo,{filter:"invert(1)",duration:2,ease:"power4.out"}),t.to(this,{shapeColor:n,duration:2,ease:"none"},"<"),t.to(this,{buttonColor:n,duration:2,ease:"power4",onUpdate:()=>{this.style.setProperty("--current-color",this.buttonColor)}},"<"),t.to(this.shapeBase,{fill:n,duration:2,ease:"none"},"<")),t.to({},{duration:.5}),t.to(this.btn,{scale:.9,duration:.5,ease:"none"},"<"),t.addLabel(`${s}`),t.add(()=>{this.style.setProperty("--current-color",this.buttonColor)}),t.to(this.canvasArea,{scale:.45,duration:1,ease:"power1.out"},`${s}`),t.to(this.shapes,{scale:1,duration:1,ease:"back.out(1.5)"},`${s}`),t.to(this.btn,{scale:1,duration:1,ease:"back.out(4)"},`${s}`),t.to(this.shapeBase,{morphSVG:{shape:`#${s}`},duration:1,ease:"back.out(1.5)"},`${s}`),t.to(this.shapeBase,{morphSVG:{shape:`#${s}2`},duration:1.5,ease:"power1.in"}),t.to(this.shapeBase,{morphSVG:{shape:`#${s}3`},duration:1.5,ease:"none"}),t.to(this.shapeBase,{morphSVG:{shape:`#${s}4`},duration:1.5,ease:"none"}),t.to(this.shapeBase,{morphSVG:{shape:`#${s}3`},duration:1.5,ease:"power1.out"}),t.addLabel(`${s}_after`),t.to(this.shapes,{scale:.5,duration:1,ease:"power1.in"},`${s}_after`),t.to(this.shapeBase,{morphSVG:{shape:"#white"},duration:1,ease:"power1.out"},`${s}_after`),t.to(this.canvasArea,{scale:1,duration:1,ease:"power1.out"},`${s}_after`),r!==this.colors.length-1&&(t.to(this,{shapeColor:this.colors[r+1].value,duration:2,ease:"none"}),t.to(this,{buttonColor:this.colors[r+1].value,duration:2,ease:"none",onUpdate:()=>{this.style.setProperty("--current-color",this.buttonColor)}},"<"),t.to(this.shapeBase,{duration:2,fill:this.colors[r+1].value,ease:"none"},"<")),r===this.colors.length-1&&(t.to({},{duration:.5}),t.to(this,{shapeColor:this.colors[0].value,duration:1,ease:"none"}),t.to(this,{buttonColor:this.colors[0].value,duration:1,ease:"none",onUpdate:()=>{this.style.setProperty("--current-color",this.buttonColor)}},"<"),t.to(this.shapeBase,{fill:this.colors[0].value,duration:1,ease:"none"},"<"),t.to({},{duration:.5}),t.add(()=>{t.seek("blue",!1)}))}),u.create({trigger:this,start:"top top",end:"bottom top",onLeave:()=>{t.pause()},onEnterBack:()=>{t.play()}})}}customElements.define("top-kv",d);
