import{g as e}from"./index.js";import{S as c}from"./ScrollTrigger.js";e.registerPlugin(c);class n extends HTMLElement{canvas;ctx;mm;breakPoint;colorTop;colorBottom;wavePoints;canvasWidth;canvasHeight;points;animationId;isPlaying;static WAVE_AMPLITUDE_BASE=30;static WAVE_AMPLITUDE_RANDOM=10;static WAVE_SPEED_BASE=.5;static WAVE_SPEED_RANDOM=.25;static WAVE_FREQUENCY_BASE=.02;static WAVE_FREQUENCY_RANDOM=.01;constructor(){super(),this.mm=e.matchMedia(),this.breakPoint=1024,this.colorTop=this.getAttribute("data-color-top")||"#f8f5f0",this.colorBottom=this.getAttribute("data-color-bottom")||"#fff",this.points=[],this.animationId=null,this.isPlaying=!1,setTimeout(()=>{this.init()},100)}async init(){if(this.canvas=this.querySelector("canvas"),!this.canvas){console.error("Canvas element not found");return}if(this.ctx=this.canvas.getContext("2d"),!this.ctx){console.error("Canvas context not available");return}this.mm.add({isDesktop:`(min-width: ${this.breakPoint}px)`,isMobile:`(max-width: ${this.breakPoint-1}px)`},s=>{let{isDesktop:t,isMobile:i}=s.conditions;return t&&(this.wavePoints=7,this.canvasWidth=2880,this.canvasHeight=120),i&&(this.wavePoints=4,this.canvasWidth=780,this.canvasHeight=120),this.setupCanvas(),this.createWavePoints(),()=>{this.stopAnimation(),this.points=[],this.ctx&&this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}}),c.create({trigger:this,start:"top bottom",end:"bottom top",onToggle:s=>{s.isActive?this.isPlaying||this.startAnimation():this.stopAnimation()}})}setupCanvas(){this.canvas&&(this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight)}createWavePoints(){this.points=[];const s=this.canvasWidth/this.wavePoints;for(let t=0;t<=this.wavePoints;t++)this.points.push({x:t*s,y:this.canvasHeight/2,originalY:this.canvasHeight/2,offset:Math.random()*Math.PI*2,amplitude:n.WAVE_AMPLITUDE_BASE+Math.random()*n.WAVE_AMPLITUDE_RANDOM,frequency:n.WAVE_FREQUENCY_BASE+Math.random()*n.WAVE_FREQUENCY_RANDOM,speed:n.WAVE_SPEED_BASE+Math.random()*n.WAVE_SPEED_RANDOM})}drawWave(){if(!this.ctx)return;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);const s=Date.now()*.001;this.points.forEach((t,i)=>{t.y=t.originalY+Math.sin(s*t.speed+t.offset)*t.amplitude}),this.ctx.fillStyle=this.colorTop,this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.points[0].x,this.points[0].y);for(let t=0;t<this.points.length-1;t++){const i=this.points[t],o=this.points[t+1],a=i.x+(o.x-i.x)/2,h=i.y+(o.y-i.y)/2;this.ctx.quadraticCurveTo(i.x,i.y,a,h)}this.ctx.lineTo(this.points[this.points.length-1].x,this.points[this.points.length-1].y),this.ctx.lineTo(this.canvasWidth,0),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle=this.colorBottom,this.ctx.beginPath(),this.ctx.moveTo(0,this.canvasHeight),this.ctx.lineTo(this.points[0].x,this.points[0].y);for(let t=0;t<this.points.length-1;t++){const i=this.points[t],o=this.points[t+1],a=i.x+(o.x-i.x)/2,h=i.y+(o.y-i.y)/2;this.ctx.quadraticCurveTo(i.x,i.y,a,h)}this.ctx.lineTo(this.points[this.points.length-1].x,this.points[this.points.length-1].y),this.ctx.lineTo(this.canvasWidth,this.canvasHeight),this.ctx.closePath(),this.ctx.fill()}startAnimation(){if(this.isPlaying)return;this.isPlaying=!0;const s=()=>{this.isPlaying&&(this.drawWave(),this.animationId=requestAnimationFrame(s))};s()}stopAnimation(){this.isPlaying=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}}customElements.define("wave-separator",n);
